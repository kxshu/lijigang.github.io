<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Mastering Emacs - 喜欢写代码的PM</title>
    <meta charset="utf-8" />
    <meta name="author" content="李继刚" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">喜欢写代码的PM</a></h1>
        <p>行有不得, 反求诸己</p>
        <ul>
          <li><a href="/learn/">Learn</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/concept/">Concept</a></li>
          <li><a href="/notes/">Notes</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/lijigang">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="http://www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="lijigang.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>Mastering Emacs</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Emacs Philosophy</a></li>
<li><a href="#sec-2">2. Emacs Help System</a>
<ul>
<li><a href="#sec-2-1">2.1. Info Manual</a></li>
<li><a href="#sec-2-2">2.2. Apropose</a></li>
<li><a href="#sec-2-3">2.3. The Describe System</a></li>
</ul>
</li>
<li><a href="#sec-3">3. The Theory of Movement</a>
<ul>
<li><a href="#sec-3-1">3.1. Basic Movement Commands</a></li>
<li><a href="#sec-3-2">3.2. Bookmarks and Registers</a></li>
<li><a href="#sec-3-3">3.3. Selections and Regions</a></li>
<li><a href="#sec-3-4">3.4. Searching and Indexing</a></li>
</ul>
</li>
<li><a href="#sec-4">4. The Theory of Edit</a>
<ul>
<li><a href="#sec-4-1">4.1. Killing and Yanking Text</a></li>
<li><a href="#sec-4-2">4.2. Transposing Text</a></li>
<li><a href="#sec-4-3">4.3. Filling and Commenting</a></li>
<li><a href="#sec-4-4">4.4. Search and Replace</a></li>
<li><a href="#sec-4-5">4.5. Changing Case</a></li>
<li><a href="#sec-4-6">4.6. Counting Things</a></li>
<li><a href="#sec-4-7">4.7. Text Manipulation</a></li>
<li><a href="#sec-4-8">4.8. Keyboard Macros</a></li>
<li><a href="#sec-4-9">4.9. Sorting and Aligning</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Emacs Philosophy</h2>
<div class="outline-text-2" id="text-1">
<blockquote>
<p>
Emacs is a tinkerer's editor.
</p>

<p>
Truly, in Emacs, you can change everything.
</p>
</blockquote>

<p>
Vim使用 <b>Vimscript</b> 来编写plugin, Emacs使用 <b>Emacs Lisp</b> 来编写Emacs以及
plugin. 也就是说, Emacs拥有着Lisp的 <code>code</code> 即 <code>data</code> 的特性.
</p>

<p>
使用Emacs, 经过了最初的适应阶段之后, 要想继续研究如何更高好地利用Emacs,
<code>Elisp</code> 是必学之物. 使用Elisp, 就可以将Emacs改造成你想要的.
</p>

<p>
Emacs除了可以让人随心所欲的定制化以外, 还有一个很出名的地方就在于其复杂的快捷键.
</p>

<p>
它底层实现了N多函数, 这其中有一部分是对「End-user」用户公开的, 也就是我们
可以通过 <code>M-x</code> 输入函数名称进行调用的. 这一部分函数, 在本书中被称作 <b>Command</b>.
在Command中, 一些最经常使用的函数, 被事先按一定的规则, 绑定到了快捷键上.
</p>

<p>
说起来有点有拗口, 实际上如下图所示:
</p>


<div class="figure">
<p><img src="/assets/blog/2015/08/21/mastering-emacs/emacs_functions.png" alt="emacs_functions.png" />
</p>
</div>

<p>
Emacs中有几个 <code>Modifier keys</code>, 如下表所示:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Modifier</th>
<th scope="col" class="left">Full Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-</td>
<td class="left">Control</td>
</tr>

<tr>
<td class="left">M-</td>
<td class="left">Meta</td>
</tr>

<tr>
<td class="left">S-</td>
<td class="left">Shift</td>
</tr>

<tr>
<td class="left">s-</td>
<td class="left">Super (not shift!)</td>
</tr>

<tr>
<td class="left">H-</td>
<td class="left">Hyper</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Emacs Help System</h2>
<div class="outline-text-2" id="text-2">
<p>
Emacs中的N多函数, 不可能每个都能记住, 需要使用某些函数的时候, 我们只需要向
帮助系统求助即可. Emacs的帮助系统包含三个部分: Info Manual, Apropos,
Describe System.
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Info Manual</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Emacs的手册是用TeXinfo写的, 可以通过 <code>C-h i</code> 或者 <code>M-x info</code> 打开.
</p>

<p>
里面包含下面的快捷键:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">[ and ]</td>
<td class="left">Previous / next node</td>
</tr>

<tr>
<td class="left">l and r</td>
<td class="left">Go back / forword in history</td>
</tr>

<tr>
<td class="left">n and p</td>
<td class="left">Previous / next sibling node</td>
</tr>

<tr>
<td class="left">u</td>
<td class="left">Goes up one level to a parent node</td>
</tr>

<tr>
<td class="left">Space</td>
<td class="left">Scroll one screen at a time</td>
</tr>

<tr>
<td class="left">TAB</td>
<td class="left">Cycles through cross-references and links</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">Opens the active link</td>
</tr>

<tr>
<td class="left">m</td>
<td class="left">Prompts for a menu item name and opens it</td>
</tr>

<tr>
<td class="left">q</td>
<td class="left">Closes the info browser</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Apropose</h3>
<div class="outline-text-3" id="text-2-2">
<p>
当你不确定自己要找的函数叫什么名字的时候, 可以通过Apropose来定位它.
</p>

<p>
通过 <code>C-h a</code> 或者 <code>M-x apropos-command</code> 来访问最常用的Apropose命令.
</p>

<p>
其它的Apropose命令包括:
</p>

<ul class="org-ul">
<li>apropos
</li>
<li>apropos-command
</li>
<li>apropos-documentation
</li>
<li>apropos-library
</li>
<li>apropos-user-option
</li>
<li>apropos-value
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> The Describe System</h3>
<div class="outline-text-3" id="text-2-3">
<p>
当你明确知道自己要找的东西名称时, describe system可以告诉你其功能是什么.
</p>

<p>
常用的函数如下:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">函数</th>
<th scope="col" class="left">快捷键</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">describe-mode</td>
<td class="left">C-h m</td>
</tr>

<tr>
<td class="left">describe-function</td>
<td class="left">C-h f</td>
</tr>

<tr>
<td class="left">describe-variable</td>
<td class="left">C-h v</td>
</tr>

<tr>
<td class="left">describe-key</td>
<td class="left">C-h k</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> The Theory of Movement</h2>
<div class="outline-text-2" id="text-3">
<p>
在Emacs中, 移动光标分为三类: local, regional, or global.
</p>

<ul class="org-ul">
<li>Local Movement
</li>
</ul>

<p>
最常见的一类移动, 平时编辑文本时, 按语法单元移动光标, 即为 <code>local
movement</code>. 例如, 按字符、单词、行、句子、段落、balanced expression 等等进
行移动.
</p>

<ul class="org-ul">
<li>Regional Movement
</li>
</ul>

<p>
和local movement类似, 但区域更大. 例如, 写代码时, 移动区域为函数或类. 写文
章时, 移动区域为章节等等.
</p>

<ul class="org-ul">
<li>Global Movement
</li>
</ul>

<p>
移动区域为从一个Buffer到另一个Buffer, 或者从一个Window到另一个Window.
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Basic Movement Commands</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The four basic movement commands are:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-f</td>
<td class="left">Move forward by character</td>
</tr>

<tr>
<td class="left">C-b</td>
<td class="left">Move backward by character</td>
</tr>

<tr>
<td class="left">C-p</td>
<td class="left">Move to previous line</td>
</tr>

<tr>
<td class="left">C-n</td>
<td class="left">Move to next line</td>
</tr>
</tbody>
</table>

<p>
Moving by line:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-a</td>
<td class="left">Move point to the beginning of the line</td>
</tr>

<tr>
<td class="left">C-e</td>
<td class="left">Move point to the end of the line</td>
</tr>

<tr>
<td class="left">M-m</td>
<td class="left">Move Point to the first non-whitespace</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">character on this line</td>
</tr>
</tbody>
</table>


<p>
Moving by word:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-f</td>
<td class="left">Move forward by word</td>
</tr>

<tr>
<td class="left">M-b</td>
<td class="left">Move backward by word</td>
</tr>
</tbody>
</table>

<p>
Moving by sentence:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">Key Binding</td>
<td class="left">Purpose</td>
</tr>

<tr>
<td class="left">M-a</td>
<td class="left">Move to beginning of sentence</td>
</tr>

<tr>
<td class="left">M-e</td>
<td class="left">Move to end of sentence</td>
</tr>
</tbody>
</table>


<p>
Moving by paragraph:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-}</td>
<td class="left">Move forward to end of paragraph</td>
</tr>

<tr>
<td class="left">M-{</td>
<td class="left">Move backward to start of paragraph</td>
</tr>
</tbody>
</table>

<p>
Moving by Defun:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-M-a</td>
<td class="left">Move to beginning of defun</td>
</tr>

<tr>
<td class="left">C-M-e</td>
<td class="left">Move to end of defun</td>
</tr>
</tbody>
</table>

<p>
Moving by S-Expressions
</p>

<p>
S-Expression是Lisp中的术语, 指的是 <code>balanced expressions</code>.
</p>

<p>
balanced expressions通常包括两类:
</p>

<ul class="org-ul">
<li>字符串
</li>
</ul>

<p>
字符串一般由单引号或双引号包起, 两端平衡.
</p>

<ul class="org-ul">
<li>括号
</li>
</ul>

<p>
()[]{}&lt;&gt;
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-M-f</td>
<td class="left">Move forward by s-expression</td>
</tr>

<tr>
<td class="left">C-M-b</td>
<td class="left">Move backward by s-expression</td>
</tr>

<tr>
<td class="left">C-M-d</td>
<td class="left">Move down into a list</td>
</tr>

<tr>
<td class="left">C-M-u</td>
<td class="left">Move up out of a list</td>
</tr>

<tr>
<td class="left">C-M-n</td>
<td class="left">Move forward to the next list</td>
</tr>

<tr>
<td class="left">C-M-p</td>
<td class="left">Move backward to the previous list</td>
</tr>

<tr>
<td class="left">C-M-k</td>
<td class="left">Kill the sexp following point</td>
</tr>
</tbody>
</table>

<p>
其它常用移动快捷键:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x C-f</td>
<td class="left">Find (open) a file</td>
</tr>

<tr>
<td class="left">C-x C-s</td>
<td class="left">Save the buffer</td>
</tr>

<tr>
<td class="left">C-x b</td>
<td class="left">Switch buffer</td>
</tr>

<tr>
<td class="left">C-x k</td>
<td class="left">Kill (close) a buffer</td>
</tr>

<tr>
<td class="left">C-x C-b</td>
<td class="left">Display all open buffers</td>
</tr>

<tr>
<td class="left">C-x C-c</td>
<td class="left">Exits Emacs</td>
</tr>

<tr>
<td class="left">Esc Esc Esc</td>
<td class="left">Exits out of prompts, regions,</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">prefix arguments and return</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">to just one window</td>
</tr>

<tr>
<td class="left">C-/</td>
<td class="left">Undo changes</td>
</tr>
</tbody>
</table>

<p>
编程实用命令设置:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-x subword-mode</td>
<td class="left">Minor mode that treats CamelCase</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">as distinct words</td>
</tr>

<tr>
<td class="left">M-x superword-mode</td>
<td class="left">Minor mode that treats snake<sub>case</sub></td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">as one word</td>
</tr>

<tr>
<td class="left">M-x glasses-mode</td>
<td class="left">Minor mode that visually separates</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">CamelCase words into Camel<sub>Case</sub>.</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">(it does not alter your buffer text)</td>
</tr>
</tbody>
</table>

<p>
Scrolling:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-v</td>
<td class="left">Scroll down one page</td>
</tr>

<tr>
<td class="left">M-v</td>
<td class="left">Scroll up one page</td>
</tr>

<tr>
<td class="left">C-M-v</td>
<td class="left">Scroll down the other window</td>
</tr>

<tr>
<td class="left">C-M-S-v</td>
<td class="left">Scroll up the other window</td>
</tr>

<tr>
<td class="left">C-x &lt;</td>
<td class="left">Scroll left</td>
</tr>

<tr>
<td class="left">C-x &gt;</td>
<td class="left">Scroll right</td>
</tr>

<tr>
<td class="left">M-&lt;</td>
<td class="left">Move to the beginning of the buffer</td>
</tr>

<tr>
<td class="left">M-&gt;</td>
<td class="left">Move to the end of the buffer</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Bookmarks and Registers</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Emacs中的bookmards是存储在一个文件中的, 文件位置由变量
<code>bookmark-default-file</code> 控制.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x r m</td>
<td class="left">Set a bookmark</td>
</tr>

<tr>
<td class="left">C-x r l</td>
<td class="left">List bookmarks</td>
</tr>

<tr>
<td class="left">C-x r b</td>
<td class="left">Jump to bookmark</td>
</tr>
</tbody>
</table>

<p>
Emacs中的registers是临时性的, 一个register就是一个单独的字符.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x r n</td>
<td class="left">Store number in register</td>
</tr>

<tr>
<td class="left">C-x r s</td>
<td class="left">Store region in register</td>
</tr>

<tr>
<td class="left">C-x r SPC</td>
<td class="left">Store point in register</td>
</tr>

<tr>
<td class="left">C-x r +</td>
<td class="left">Increment number in register</td>
</tr>

<tr>
<td class="left">C-x r j</td>
<td class="left">Jump to register</td>
</tr>

<tr>
<td class="left">C-x r i</td>
<td class="left">Insert content of register</td>
</tr>

<tr>
<td class="left">C-x r w</td>
<td class="left">Store window configuration in register</td>
</tr>

<tr>
<td class="left">C-x r f</td>
<td class="left">Store frameset in register</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Selections and Regions</h3>
<div class="outline-text-3" id="text-3-3">
<p>
在Emacs中, 一个Region的边界是由point和mark两者界定的.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-&lt;SPC&gt;</td>
<td class="left">Set the mark, and toggles the region</td>
</tr>

<tr>
<td class="left">C-u C-&lt;SPC&gt;</td>
<td class="left">Jump to the mark, and repeated calls</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">go further back the mark ring</td>
</tr>

<tr>
<td class="left">C-x C-x</td>
<td class="left">Exchanges the point and mark, and reactivates</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">your last region.</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Searching and Indexing</h3>
<div class="outline-text-3" id="text-3-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-s</td>
<td class="left">Begin an incremental search</td>
</tr>

<tr>
<td class="left">C-r</td>
<td class="left">Begin a backward incremental search</td>
</tr>

<tr>
<td class="left">C-M-s</td>
<td class="left">Begin a regexp incremental search</td>
</tr>

<tr>
<td class="left">C-M-r</td>
<td class="left">Begin a regexp backward incremental search</td>
</tr>

<tr>
<td class="left">RET</td>
<td class="left">Pick the selected match</td>
</tr>

<tr>
<td class="left">M-n</td>
<td class="left">Move to next item in search history</td>
</tr>

<tr>
<td class="left">M-p</td>
<td class="left">Move to previous item in search history</td>
</tr>

<tr>
<td class="left">C-s C-s</td>
<td class="left">Begin Isearch against last search string</td>
</tr>

<tr>
<td class="left">C-r C-r</td>
<td class="left">Begin backward Isearch against last</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">search string</td>
</tr>
</tbody>
</table>

<p>
Other Movement Commands:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-r</td>
<td class="left">Re-position the point to the top left,</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">middle left, or bottom left</td>
</tr>

<tr>
<td class="left">C-l</td>
<td class="left">Re-center the point to the middle, top,</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">or bottom in the buffer</td>
</tr>

<tr>
<td class="left">C-M-l</td>
<td class="left">Re-position the comment or definition</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">so it is in view in the buffer</td>
</tr>

<tr>
<td class="left">M-g M-g</td>
<td class="left">Go to line</td>
</tr>

<tr>
<td class="left">M-g TAB</td>
<td class="left">Go to column</td>
</tr>

<tr>
<td class="left">M-g c</td>
<td class="left">Go to character position</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> The Theory of Edit</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Killing and Yanking Text</h3>
<div class="outline-text-3" id="text-4-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-d</td>
<td class="left">Delete character</td>
</tr>

<tr>
<td class="left">&lt;backspace&gt;</td>
<td class="left">Delete previous character</td>
</tr>

<tr>
<td class="left">M-d</td>
<td class="left">Kill word</td>
</tr>

<tr>
<td class="left">C-k</td>
<td class="left">Kill rest of line</td>
</tr>

<tr>
<td class="left">M-k</td>
<td class="left">Kill sentence</td>
</tr>

<tr>
<td class="left">C-M-k</td>
<td class="left">Kill s-expression</td>
</tr>

<tr>
<td class="left">C-S-&lt;backspace&gt;</td>
<td class="left">Kill current line</td>
</tr>
</tbody>
</table>

<p>
其它常用快捷键:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Kill Ring Purpose</th>
<th scope="col" class="left">Clipboard</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-w</td>
<td class="left">Kill active region</td>
<td class="left">cut</td>
</tr>

<tr>
<td class="left">M-w</td>
<td class="left">Copy to kill ring</td>
<td class="left">copy</td>
</tr>

<tr>
<td class="left">C-M-w</td>
<td class="left">Append kill</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">C-y</td>
<td class="left">Yank last kill</td>
<td class="left">paste</td>
</tr>

<tr>
<td class="left">M-y</td>
<td class="left">Cycle through kill ring,</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">replacing yanked text</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Transposing Text</h3>
<div class="outline-text-3" id="text-4-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-t</td>
<td class="left">Transpose characters</td>
</tr>

<tr>
<td class="left">M-t</td>
<td class="left">Transpose words</td>
</tr>

<tr>
<td class="left">C-M-t</td>
<td class="left">Transpose s-expressions</td>
</tr>

<tr>
<td class="left">C-x C-t</td>
<td class="left">Transpose lines</td>
</tr>

<tr>
<td class="left">M-x transpose-paragraphs</td>
<td class="left">Transpose paragraphs</td>
</tr>

<tr>
<td class="left">M-x transpose-sentences</td>
<td class="left">Transpose sentences</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Filling and Commenting</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Filling:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-q</td>
<td class="left">Refills the paragraph point is in</td>
</tr>

<tr>
<td class="left">C-x f</td>
<td class="left">Sets the fill column width</td>
</tr>

<tr>
<td class="left">C-x .</td>
<td class="left">Sets the fill prefix</td>
</tr>

<tr>
<td class="left">M-x auto-fill-mode</td>
<td class="left">Toggles auto-filling</td>
</tr>
</tbody>
</table>

<p>
Commenting:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-;</td>
<td class="left">Comment or uncomment DWIM (do what i mean)</td>
</tr>

<tr>
<td class="left">C-x C-;</td>
<td class="left">Comment or uncomment line</td>
</tr>

<tr>
<td class="left">M-x comment-box</td>
<td class="left">Comments the region but as a box</td>
</tr>

<tr>
<td class="left">M-j</td>
<td class="left">Inserts new line and continues</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">with comment on a new line</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Search and Replace</h3>
<div class="outline-text-3" id="text-4-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-M-%</td>
<td class="left">Query regexp search and replace</td>
</tr>

<tr>
<td class="left">M-%</td>
<td class="left">Query search and replace</td>
</tr>

<tr>
<td class="left">M-x replace-string</td>
<td class="left">Search and replace</td>
</tr>

<tr>
<td class="left">M-x replace-regexp</td>
<td class="left">Regexp search and replace</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Changing Case</h3>
<div class="outline-text-3" id="text-4-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x C-u</td>
<td class="left">Uppercase the region</td>
</tr>

<tr>
<td class="left">C-x C-l</td>
<td class="left">Lowercase the region</td>
</tr>

<tr>
<td class="left">M-x upcase-initials-region</td>
<td class="left">Capitalize the region</td>
</tr>

<tr>
<td class="left">M-c</td>
<td class="left">Capitalize the next word</td>
</tr>

<tr>
<td class="left">M-u</td>
<td class="left">Uppercase the next word</td>
</tr>

<tr>
<td class="left">M-l</td>
<td class="left">Lowercase the next word</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> Counting Things</h3>
<div class="outline-text-3" id="text-4-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-x count-lines-region</td>
<td class="left">Counts number of lines</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">in the region</td>
</tr>

<tr>
<td class="left">M-x count-matches</td>
<td class="left">Counts number of patterns</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">that match in a region</td>
</tr>

<tr>
<td class="left">M-x count-words</td>
<td class="left">Counts words, lines, and chars</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">in the buffer</td>
</tr>

<tr>
<td class="left">M-x count-words-region, M-=</td>
<td class="left">Counts words, lines, and chars</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">in the region</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> Text Manipulation</h3>
<div class="outline-text-3" id="text-4-7">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-x delete-duplicate-lines</td>
<td class="left">Delete the first duplicate</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">line it encounters, starting</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">from the top</td>
</tr>

<tr>
<td class="left">M-x flush-lines</td>
<td class="left">Flush (delete) all lines in a</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">region that match a pattern</td>
</tr>

<tr>
<td class="left">M-x keep-lines</td>
<td class="left">Keep all lines in a region that</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">match a pattern and removes all</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">non-matches</td>
</tr>

<tr>
<td class="left">C-o</td>
<td class="left">Insert a blank line after point</td>
</tr>

<tr>
<td class="left">C-x C-o</td>
<td class="left">Delete all blank lines after point</td>
</tr>

<tr>
<td class="left">C-M-o</td>
<td class="left">Split a line after point, keeping</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">the indentation</td>
</tr>

<tr>
<td class="left">M-^</td>
<td class="left">Join the line the point is on with</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">the one above</td>
</tr>

<tr>
<td class="left">M-SPC</td>
<td class="left">Delete all but one space or tab to</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">the left and right of the point</td>
</tr>

<tr>
<td class="left">M-\\</td>
<td class="left">Delete all spaces and tabs around</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">the point</td>
</tr>

<tr>
<td class="left">M-x whitespace-mode</td>
<td class="left">Minor mode that highlights all</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">whitespace characters</td>
</tr>

<tr>
<td class="left">M-x whitespace-newline-mode</td>
<td class="left">Minor mode that displays newline</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">character with a $</td>
</tr>

<tr>
<td class="left">M-x whitespace-toggle-options</td>
<td class="left">Display a toggle menu of all</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">whitespace-mode options</td>
</tr>

<tr>
<td class="left">M-x whitespace-report</td>
<td class="left">Show whitespace issues</td>
</tr>

<tr>
<td class="left">M-x whitespace-clean-up</td>
<td class="left">Attemp automatic cleanup</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> Keyboard Macros</h3>
<div class="outline-text-3" id="text-4-8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Key Binding</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">C-x (</td>
<td class="left">Start macro recording</td>
</tr>

<tr>
<td class="left">C-x )</td>
<td class="left">Stop macro recording</td>
</tr>

<tr>
<td class="left">C-x e</td>
<td class="left">Play last macro</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Sorting and Aligning</h3>
<div class="outline-text-3" id="text-4-9">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Command</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">M-x sort-lines</td>
<td class="left">Sort alphabetically</td>
</tr>

<tr>
<td class="left">M-x sort-fields</td>
<td class="left">Sort field lexicographically</td>
</tr>

<tr>
<td class="left">M-x sort-numeric-fields</td>
<td class="left">Sort field numerically</td>
</tr>

<tr>
<td class="left">M-x sort-columns</td>
<td class="left">Sort column alphabetically</td>
</tr>

<tr>
<td class="left">M-x sort-paragraphs</td>
<td class="left">Sort paragraphs alphabetically</td>
</tr>

<tr>
<td class="left">M-x sort-regexp-fields</td>
<td class="left">Sort by regexp-defined fields</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">lexicographically</td>
</tr>

<tr>
<td class="left">M-x align</td>
<td class="left">Align region based on align rules</td>
</tr>

<tr>
<td class="left">M-x align-current</td>
<td class="left">Align section based on align rules</td>
</tr>

<tr>
<td class="left">M-x align-regexp</td>
<td class="left">Align region based on regexp</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2015-08-21</span>
        <span title="last modification date" class="post-info">2015-06-09</span>
        <span title="tags" class="post-info"><a href="/tags/读书笔记/">读书笔记</a> <a href="/tags/emacs/">Emacs</a></span>
        <span title="author" class="post-info">李继刚</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2015/08/21/mastering-emacs/";
          var disqus_url = "http://lijigang.github.io/blog/2015/08/21/mastering-emacs/";
          var disqus_shortname = 'lijigang';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-49533446-2']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:lijigang &lt;at&gt; 360 &lt;dot&gt; cn">李继刚</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
