#+title: Rime 输入法
#+options: toc:nil

[[http://rime.im/][Rime]] 是一个输入法框架，把实现一个输入法相关的功能模块抽象出来，实现好了。类似一个 PaaS 服务，你只需要从 Rime 中挑选自己想要功能，通过配置文件拼凑一起，就能实现自己的输入法功能。

当然，Rime 框架把常见的拼音输入法和五笔输入法相关的配置都出厂自带了，只要在配置文件中稍微改一下配置，就能立即上手。

* Rime 引擎

[[./images/rime_engine.jpg]]

Rime 引擎由四个环节组成：Processor → Segmentor → Translator → Filter

每个环节各有一些相关组件，详细组件说明及配置选项， 可以参照 [[https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md][雪齐的这篇文章]]。

* 配置文件

通过修改配置文件中的选项参数，可以让 Rime 实现我们想要的输入法功能。

因为 Rime 更新时，会替换一些自带的配置文件，所有通常自定义的一些配置修改都会在自建的配置文件中进行。这些文件的命名规则为 =原配置文件名= . =custom= . =原配置文件后缀= .
通过需要修改的文件有下面几个：

1. installation.yaml
   #+BEGIN_SRC YAML
    distribution_code_name: Squirrel
    distribution_name: "鼠鬚管"
    distribution_version: 0.9.26.1
    install_time: "Wed Aug 23 18:18:07 2017"
    installation_id: "Arthur's Macbook"
    rime_version: 1.2.9
    sync_dir: "/Users/ljg/Library/Mobile Documents/com~apple~CloudDocs/3-config/6-Rime"
   #+END_SRC

   该文件为例外，并没有新建文件，直接在自带文件中修改。重点关注上面的 =installation_id= 和 =sync_dir= 参数。

   在不同电脑上使用时，Rime 会为每台电脑记录一个 ID， 我们可以通过修改 =installation_id= 参数来指定名称。

   想同步电脑配置到云盘时，可以通过 =sync_dir= 参数来指定路径。自己修改的配置文件和字典文件会同步到该目录。

2. default.custom.yaml

   #+BEGIN_SRC YAML
    patch:
      "menu":
        "page_size": 4
      "schema_list":
        - schema: wubi86
   #+END_SRC

   每个配置文件有且只有一个 patch: 标识这个补丁文件, 且 patch 要顶格写。在该文件中配置候选项数目，输入方案有哪些。 上面示例中设置候选项为 4 个， 输入方案只有五笔。

3. squirrel.custom.yaml

   #+BEGIN_SRC YAML
    patch:
      style:
        horizontal: true
        font_point: 24
        corner_radius: 10
        label_font_point: 24
        color_scheme: luna

      app_options/com.alfredapp.Alfred:
        ascii_mode: true
   #+END_SRC

   在该配置文件中设置五笔输入法的样式， 如字体大小、配色方案等。

4. wubi86.custom.yaml

   #+BEGIN_SRC YAML
    patch:
      "translator/dictionary": wubi86.extended
      "punctuator/import_preset": symbols
      "recognizer/patterns/punct": "^/([a-z]+|[0-9])$"
   #+END_SRC

   在该配置文件设置五笔输入法相关的字典文件，预设的符号文件等。
